# Agent Notes

## Release workflow (vX.Y.Z)

- Update versions in `package.json`, `cashu-for-woocommerce.php` (header + `CASHU_WC_VERSION`), `tests/bootstrap.php`, and stable tag/changelog in `readme.txt`.
- Run `./build.sh` to generate distributable assets and translation files.
- Generate `CHANGELOG.md` via `npm run changelog` and use its latest section for the GitHub Release notes.
- Commit the changes and push to `main`.
- Create an annotated tag `vX.Y.Z` and push tags.
- Publish a GitHub release for the tag (non‑prerelease) to trigger `.github/workflows/release-zip.yml`, which builds and uploads `cashu-for-woocommerce.zip`.

## Project specifics

- The release workflow validates tag version matches `package.json` and the plugin header version in `cashu-for-woocommerce.php`.
- `README.md` is generated by the Grunt startfile during `./build.sh`; don’t edit it by hand.
- Translations are generated via `grunt`/`wp i18n` during build; expect `languages/cashu-for-woocommerce.pot` to update.
- For full dev setup details, see `CONTRIBUTING.md`.

## Dev essentials

- Tooling: Node/npm, PHP/Composer; Docker required for `wp-env`.
- Common scripts: `npm run build`, `npm run format`, `npm run lint`, `npm run i18n`, `npm run readme`.
- Local WP env: `npm run wp-env:start`, `npm run wp-env:seed-store`, `npm run wp-env:stop`.
- Logs: plugin PHP log is `debug.log`; WooCommerce logs in admin.

## Commit style

- Use Conventional Commits (eg: `feat: ...`, `fix: ...`, `chore: ...`, `docs: ...`, `refactor: ...`, `test: ...`, `ci: ...`, `build: ...`).
- Keep subjects concise and lowercase; include scope only when helpful (eg: `feat(checkout): ...`).

## Release notes from changelog

- Generate the changelog: `npm run changelog`.
- Use the latest section as release notes, for example:
  `sed -n '1,120p' CHANGELOG.md > /tmp/release-notes.md`
  then `gh release create vX.Y.Z --notes-file /tmp/release-notes.md`.
